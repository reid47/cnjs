"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var webkit="-webkit-",moz="-moz-",ms="-ms-",imageSet="image-set",oldFlexAlignment={"flex-start":"start","flex-end":"end","space-between":"justify","space-around":"distribute"},_writingMode={"horizontal-tb":"lr-tb","vertical-lr":"tb-lr","vertical-rl":"tb-rl"},intrinsicSizingProps={"max-height":1,"max-width":1,width:1,height:1,"min-width":1,"min-height":1},intrinsicSizingVals={"min-content":1,"max-content":1,"fill-available":1,"fit-content":1,"contain-floats":1},addWebkit=function(e,i){return[[webkit+e,i],[e,i]]},addWebkitVal=function(e,i){return[[e,webkit+i],[e,i]]},addMoz=function(e,i){return[[moz+e,i],[e,i]]},addMs=function(e,i){return[[ms+e,i],[e,i]]},addWebkitMoz=function(e,i){return[[webkit+e,i],[moz+e,i],[e,i]]},addWebkitMozMs=function(e,i){return[[webkit+e,i],[moz+e,i],[ms+e,i],[e,i]]},addWebkitMs=function(e,i){return[[webkit+e,i],[ms+e,i],[e,i]]},prefixMaskBorder=function(e,i){return[[webkit+e.replace("border","box-image"),i],[e,i]]},prefixDisplayFlex=function(e,i){var t="inline-flex"===i?"inline-":"";return[[e,webkit+t+"box"],[e,ms+t+"flexbox"],[e,i]]},cases={"align-content":function(e,i){return[[ms+"flex-line-pack",oldFlexAlignment[i]||i],[e,i]]},"align-items":function(e,i){return[[webkit+"box-align",oldFlexAlignment[i]||i],[ms+"flex-align",oldFlexAlignment[i]||i],[e,i]]},"align-self":function(e,i){return[[ms+"flex-item-align",oldFlexAlignment[i]||i],"flex-start"!==i&&"flex-end"!==i&&"baseline"!==i&&[ms+"grid-row-align",oldFlexAlignment[i]||i],[e,i]]},appearance:addWebkitMoz,cursor:{"zoom-in":addWebkitVal,"zoom-out":addWebkitVal,grab:addWebkitVal,grabbing:addWebkitVal},display:{flex:prefixDisplayFlex,"inline-flex":prefixDisplayFlex},flex:function(e,i){var t=(""+i).split(" "),r="none"===t[0]?0:"auto"===t[0]?1:t[0],n=3===t.length&&"0"===t[2]?i+"px":i;return[[webkit+"box-"+e,r],[ms+e,n],[e,i]]},"flex-basis":function(e,i){return[[ms+"flex-preferred-size",i],[e,i]]},"flex-direction":function(e,i){return[[webkit+"box-orient",i.indexOf("row")>-1?"horizontal":"vertical"],[webkit+"box-direction",i.indexOf("reverse")>-1?"reverse":"normal"],[ms+e,i],[e,i]]},"flex-flow":function(e,i){var t=(i+"").split(" ")[0]||"";return[[webkit+"box-orient",t.indexOf("row")>-1?"horizontal":"vertical"],[webkit+"box-direction",t.indexOf("reverse")>-1?"reverse":"normal"],[ms+e,i],[e,i]]},"flex-grow":function(e,i){return[[webkit+"box-flex",i],[ms+"flex-positive",i],[e,i]]},"flex-shrink":function(e,i){return[[ms+"flex-negative",i],[e,i]]},"justify-content":function(e,i){return["space-around"!==i&&[webkit+"box-pack",oldFlexAlignment[i]||i],[ms+"flex-pack",oldFlexAlignment[i]||i],[e,i]]},"tab-size":addMoz,hyphens:addWebkitMs,"flex-wrap":addMs,"flow-into":addWebkitMs,"flow-from":addWebkitMs,"box-decoration-break":addWebkit,"break-before":addWebkitMs,"break-after":addWebkitMs,"break-inside":addWebkitMs,"clip-path":addWebkit,"region-fragment":addWebkitMs,"scroll-snap-type":addWebkitMs,"scroll-snap-coordinate":addWebkitMs,"scroll-snap-destination":addWebkitMs,"scroll-snap-points-x":addWebkitMs,"scroll-snap-points-y":addWebkitMs,"font-feature-settings":addWebkit,"mask-border-source":prefixMaskBorder,"mask-border-mode":prefixMaskBorder,"mask-border-slice":prefixMaskBorder,"mask-border-width":prefixMaskBorder,"mask-border-outset":prefixMaskBorder,"mask-border-repeat":prefixMaskBorder,"mask-border":prefixMaskBorder,order:function(e,i){var t=/[0-9]/.test(i)?(+i||0)+1:i;return[[webkit+"box-ordinal-group",t],[ms+"flex-order",i],[e,i]]},"backface-visibility":addWebkit,perspective:addWebkit,"perspective-origin":addWebkit,position:{sticky:addWebkitVal},"text-orientation":addWebkit,"backdrop-filter":addWebkit,"font-kerning":addWebkit,filter:addWebkit,"shape-image-threshold":addWebkit,"shape-margin":addWebkit,"shape-outside":addWebkit,"text-size-adjust":addWebkitMozMs,"user-select":addWebkitMozMs,"writing-mode":function(e,i){return[[webkit+e,i],[ms+e,_writingMode[i]||i],[e,i]]},"&:fullscreen":function(e,i){return[["&:"+webkit+"full-screen",i],["&:"+moz+"full-screen",i],["&:"+ms+"fullscreen",i],[e,i]]},"&::placeholder":function(e,i){return[["&::"+webkit+"input-placeholder",i],["&:"+ms+"input-placeholder",i],["&::"+ms+"input-placeholder",i],[e,i]]}},prefix=function(e,i){var t=void 0;if(cases.hasOwnProperty(e))"function"==typeof cases[e]?t=cases[e](e,i):"object"==typeof cases[e]&&"function"==typeof cases[e][i]&&(t=cases[e][i](e,i));else if(/^(transform|animation|column|text-emphasis|text-decoration-|mask|wrap-)/.test(e))t=addWebkit(e,i);else if(/^cross-fade/.test(i)){var r=(i.match(/\(([\d]+%)/)||[])[1]||"",n=i.replace("cross-fade","-webkit-cross-fade");r?n=n.replace(r+" ",""):r="0.5";var a=n.lastIndexOf(")");a>-1&&(n=n.substring(0,a)+", "+r+")"),t=[[e,n],[e,i]]}else(""+i).indexOf(imageSet)>-1?t=[[e,i.replace(imageSet,webkit+imageSet)],[e,i]]:intrinsicSizingProps[e]&&intrinsicSizingVals[i]&&(t=[[e,webkit+i],[e,moz+i],[e,i]]);return t||[[e,i]]};module.exports={prefix:prefix};var makeRule=function(e,i,t){var r=[];i.forEach(function(e){prefix(e[0],e[1]).forEach(function(e){r.push(e[0]+":"+e[1]+";")})});var n=e+"{"+r.join("")+"}";return t&&(n=t+"{"+n+"}"),n},preprocess=function(e,i){for(var t=[],r={"":[]},n="",a=!0,s=[],o=!1,d=!1,l=!1,c=[],f=[],b=!1,k=!1,p=0;p<i.length;p++){var u=i.charAt(p);if(!k||"\n"===u)switch(u){case"/":"/"===i.charAt(p+1)&&(k=!0);break;case"\n":a=!0,b=!1,k=!1;break;case":":b?c.push(u):o&&(o=!1,l=!0);break;case";":d&&(r[n].push([c.join(""),f.join("")]),f=[],c=[],d=!1);break;case" ":case"\t":o?c.push(" "):d&&f.push(" ");break;case"\r":break;case"{":s.push(n);var x=c.join("").trim();n="@"===x.charAt(0)?x:(n+x.replace(/&:/g,":").replace(/&(?!:)/g,e)).replace(/^:/,e+":"),r[n]=[],c=[],o=!1;break;case"}":n=s.pop();break;case"&":case"@":b=!0;default:a&&(o=!0,a=!1),l&&(l=!1,d=!0),d?f.push(u):o&&c.push(u)}}return Object.keys(r).forEach(function(i){if(r[i].length){var n="@"===i.charAt(0),a=i&&!n?i.replace(/&/,e):e;t.push(makeRule(a,r[i],n?i:""))}}),t};exports.preprocess=preprocess;
